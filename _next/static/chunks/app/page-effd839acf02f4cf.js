(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3275:(e,t,a)=>{Promise.resolve().then(a.bind(a,4847))},4847:(e,t,a)=>{"use strict";let s;a.r(t),a.d(t,{default:()=>S});var r=a(5155),n=a(2115),i=a(3599),l=a(2361),o=a(1392),c=a(3570),d=a(3568),m=a(558),u=a(2437),h=a.n(u);let p=JSON.parse('{"version":"0.1.0","name":"tip_jar","instructions":[{"name":"initializeTipJar","accounts":[{"name":"tipJar","isMut":true,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"owner","type":"publicKey"}]},{"name":"tip","accounts":[{"name":"tipJar","isMut":true,"isSigner":false},{"name":"tipper","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"withdraw","accounts":[{"name":"tipJar","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"destination","isMut":true,"isSigner":false}],"args":[{"name":"destination","type":"publicKey"}]}],"accounts":[{"name":"TipJar","type":{"kind":"struct","fields":[{"name":"owner","type":"publicKey"},{"name":"totalTips","type":"u64"}]}}],"events":[{"name":"TipJarInitialized","fields":[{"name":"tipJar","type":"publicKey","index":false},{"name":"owner","type":"publicKey","index":false}]},{"name":"Tipped","fields":[{"name":"tipJar","type":"publicKey","index":false},{"name":"from","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false}]},{"name":"Withdrawn","fields":[{"name":"tipJar","type":"publicKey","index":false},{"name":"owner","type":"publicKey","index":false},{"name":"destination","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false}]}],"errors":[{"code":6000,"name":"ZeroTipNotAllowed","msg":"Zero tip not allowed"},{"code":6001,"name":"Overflow","msg":"Arithmetic overflow"},{"code":6002,"name":"Unauthorized","msg":"Only the owner can withdraw"},{"code":6003,"name":"NothingToWithdraw","msg":"Nothing to withdraw"}]}'),w=()=>{if(!s){let e="C7iudfXD6GLocNBiP5BHrXKo4VWwcTBAvH6Jw5B3Pt3f";e?s=new c.PublicKey(e):(console.warn("NEXT_PUBLIC_TIP_JAR_ACCOUNT not set, using fallback"),s=new c.PublicKey("8YZqJJXQNMBhGVyNLBGLJGfbKvwDCLmvjhBEhMYbcKmE"))}return s},y=(e,t)=>{let a=new m.NQ(e,t||(()=>{let e=c.Keypair.generate();return{publicKey:e.publicKey,signTransaction:async t=>(t.partialSign(e),t),signAllTransactions:async t=>t.map(t=>(t.partialSign(e),t))}})(),{commitment:"confirmed"});return new m.BP(p,"22v3VAtU3BhYvmQwDsypAmjVeyWDR6RbdUnsCTwgdLNA",a)},x=async(e,t)=>{try{let t=w();return await e.getBalance(t)}catch(e){return console.error("Error fetching tip jar balance:",e),0}},f=async(e,t,a,s)=>{try{let a=w(),r=.01*c.LAMPORTS_PER_SOL,n=y(e,{publicKey:t,signTransaction:async t=>await s(t,e),signAllTransactions:async t=>{let a=[];for(let r of t)a.push(await s(r,e));return a}}),i=await n.methods.tip(new(h())(r)).accounts({tipJar:a,tipper:t,systemProgram:c.SystemProgram.programId}).transaction(),l=await s(i,e);await e.confirmTransaction(l,"confirmed")}catch(e){throw console.error("Error sending tip:",e),e}},b=async(e,t,a,s)=>{try{let a=w(),r=y(e,{publicKey:t,signTransaction:async t=>await s(t,e),signAllTransactions:async t=>{let a=[];for(let r of t)a.push(await s(r,e));return a}}),n=await r.methods.withdraw(t).accounts({tipJar:a,owner:t,destination:t}).transaction(),i=await s(n,e);await e.confirmTransaction(i,"confirmed")}catch(e){throw console.error("Error withdrawing funds:",e),e}};var g=a(238),N=a(5868),j=a(9785),v=a(5339),A=a(3786);let S=()=>{let{connection:e}=(0,l.w)(),{publicKey:t,sendTransaction:a}=(0,o.v)(),[s,m]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),[p,w]=(0,n.useState)(!1),[y,S]=(0,n.useState)(!1),[T,P]=(0,n.useState)(!1),[K,J]=(0,n.useState)(!1);(0,n.useEffect)(()=>{J(!0)},[]),(0,n.useEffect)(()=>{P(!!(window.solana&&window.solana.isPhantom))},[]);let _=(()=>{try{let e=JSON.parse("[236,180,45,40,25,230,199,196,23,97,61,34,63,58,151,208,177,64,41,232,38,41,85,61,108,211,25,182,130,133,250,28,220,159,10,151,87,182,145,74,164,222,217,105,144,60,33,230,118,59,124,236,101,130,73,226,160,117,233,141,98,34,140,229]");return c.Keypair.fromSecretKey(new Uint8Array(e)).publicKey}catch(e){return null}})(),k=new c.PublicKey("22v3VAtU3BhYvmQwDsypAmjVeyWDR6RbdUnsCTwgdLNA"),E=(0,n.useCallback)(async()=>{try{let a=await x(e,k);m(a/c.LAMPORTS_PER_SOL),t&&_?h(t.equals(_)):h(!1)}catch(e){d.Ay.error("⚠️ Failed to fetch tip jar balance"),console.error(e)}},[t,e,k,_]),L=async()=>{if(!t)return void d.Ay.error("\uD83D\uDD12 Please connect your wallet first");w(!0);let s=d.Ay.loading("\uD83D\uDE80 Sending your tip...");try{await f(e,t,k,a),d.Ay.dismiss(s),d.Ay.success("\uD83C\uDF89 Tipped 0.01 SOL successfully! Thank you!"),await E()}catch(e){d.Ay.dismiss(s),d.Ay.error("❌ Failed to send tip. Please try again."),console.error(e)}finally{w(!1)}},O=async()=>{if(!u)return void d.Ay.error("\uD83D\uDEAB Only the owner can withdraw funds");S(!0);let s=d.Ay.loading("\uD83D\uDCB8 Withdrawing funds...");try{await b(e,t,k,a),d.Ay.dismiss(s),d.Ay.success("\uD83D\uDCB0 All funds withdrawn successfully!"),await E()}catch(e){d.Ay.dismiss(s),d.Ay.error("❌ Failed to withdraw funds. Please try again."),console.error(e)}finally{S(!1)}};return(0,n.useEffect)(()=>{E()},[E]),(0,n.useEffect)(()=>{t?d.Ay.success("✅ Wallet connected successfully!"):(m(null),h(!1),w(!1),S(!1))},[t]),(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen py-8 px-4",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 max-w-md w-full shadow-2xl border border-white/20",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,r.jsx)(g.A,{className:"w-12 h-12 text-yellow-400 mr-2"}),(0,r.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Tip Jar"})]}),(0,r.jsx)("p",{className:"text-white/70 text-lg",children:"Send tips on Solana Devnet"})]}),(0,r.jsx)("div",{className:"mb-8",children:K&&(0,r.jsx)(i.x,{className:"!bg-gradient-to-r !from-purple-500 !to-pink-500 !rounded-xl !font-semibold !text-white !border-none !h-12 !w-full !flex !items-center !justify-center !text-base hover:!from-purple-600 hover:!to-pink-600 !transition-all !duration-200"})}),t&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(N.A,{className:"w-6 h-6 text-green-400 mr-2"}),(0,r.jsx)("span",{className:"text-white font-medium",children:"Balance"})]}),(0,r.jsx)("span",{className:"text-2xl font-bold text-white",children:null!==s?"".concat(s.toFixed(4)," SOL"):"Loading..."})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("button",{className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold py-3 px-6 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",onClick:L,disabled:p,children:p?(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{className:"w-5 h-5 mr-2"}),"Tip 0.01 SOL"]})}),u&&(0,r.jsx)("button",{className:"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold py-3 px-6 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",onClick:O,disabled:y||0===s,children:y?(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{className:"w-5 h-5 mr-2"}),"Withdraw All"]})})]}),u&&(0,r.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4",children:(0,r.jsxs)("p",{className:"text-yellow-400 text-sm font-medium flex items-center",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),"You are the owner of this tip jar"]})})]}),!t&&(0,r.jsxs)("div",{className:"text-center",children:[T?(0,r.jsx)("p",{className:"text-white/70 mb-4",children:"Connect your wallet to start tipping!"}):(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,r.jsx)(v.A,{className:"w-5 h-5 text-red-400 mr-2"}),(0,r.jsx)("p",{className:"text-red-400 text-sm font-medium",children:"Phantom Wallet Required"})]}),(0,r.jsx)("p",{className:"text-red-300 text-sm mb-3",children:"Please install Phantom wallet to use this app"}),(0,r.jsxs)("a",{href:"https://phantom.app/download",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-600 transition-colors",children:["Install Phantom ",(0,r.jsx)(A.A,{className:"w-4 h-4 ml-1"})]})]})}),(0,r.jsx)("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:(0,r.jsx)("p",{className:"text-white/50 text-sm",children:"Network: Devnet"})})]})]}),(0,r.jsx)("footer",{className:"mt-8 text-center",children:(0,r.jsx)("p",{className:"text-white/50 text-sm",children:"Built with Solana & Next.js"})})]})})}},7790:()=>{}},e=>{e.O(0,[956,33,867,333,95,441,964,358],()=>e(e.s=3275)),_N_E=e.O()}]);